# flaskMono_backend 
## Опис проекту
Підхід з використанням http запитів дозволяє отримувати інформацію про акаунти та транзакції з monobank та зберігати ці дані у власній базі даних. 
Це надає можливість зручно керувати та аналізувати фінансову інформацію з власних рахунків monobank.
Оскільки використовується архітектурний стиль REST API, це дозволяє створити свій фронтенд та використовувати його для створення запитів до беку,
або ж посилати запити іншим зручним для вас способом, наприклад через Postman.

## Основні функціональності
Отримання даних про акаунти та транзакції з monobank: Проект використовує API monobank для запиту та отримання актуальної фінансової інформації про рахунки та транзакції.
Збереження даних у базу даних: Отримана інформація про акаунти та транзакції з Монобанку зберігається у БД.
Постійне оновлення даних: Система надає можливість автоматичного оновлення інформації про нові транзакції шляхом виконання HTTP-запитів до monobank.
Використання існуючих або створення нових endpointʼів: Реалізовані деякі основні ендпойнти які дозволять вам отримувати та завантажувати дані про рахунок або транзакції.

## Інсталяція 

Для запуску необхідно мати `python ^3.9`

1. Створіть локальну копію репозиторію з GitHub. Для цього відкрийте термінал і виконайте команду: `git clone https://github.com/xneoSavage/flaskMono_backend.git`


2. Встановіть Poetry, якщо він ще не встановлений. Виконайте наступну команду:
`pip install poetry`

3. Виконайте команду для встановлення залежностей проекту:
`poetry install`

4. Після виконання команди Poetry встановить всі необхідні пакети та створить віртуальне середовище для вашого проекту.
5. Після встановлення залежностей ви можете активувати віртуальне середовище, використовуючи команду:
   `poetry shell`

6. Підключіть вашу базу даних до проекту Flask, редагуючи файл config.py. Додайте конфігураційні параметри для підключення.
   До прикладу `SQLALCHEMY_DATABASE_URI = 'postgresql://username:password@host/database_name'`

7. Ініціалізуйте Alembic для управління міграціями бази даних. Виконайте команду: `flask db init`
8. Створіть початкову міграцію, виконавши команду: `flask db migrate -m "Initial migration"`
9. Застосуйте міграцію до бази даних для створення необхідних таблиць, виконавши команду: `flask db upgrade` 
10. Запустіть сервер Flask, виконавши команду: `flask run`
11. Сервер запущений, далі ви можете створювати запити до серверу.
    
## Використання

1. Для того щоб користуватися проектом вам необхідно створити нового користувача за допомогою endpoint `'http://127.0.0.1:5000/api_v1/create-user'`
   та передати в нього значення ```{
    "username": "your_username",
    "email": "email@gmail.com",
    "password": "your_password"
}```
2. Увійти в систему використовуючи POST запит до `'http://127.0.0.1:5000/api_v1/login'` та ввести дані користувача  в тіло запиту.
```{"username": "Name1","password": "password}```

Після успішної відповіді від серверу ви отримаєте JWT, токен який потрібно використовувати для авторизації майже у всіх наступних запитах.
Просто додайте його до авторизаційного хедеру при подальших запитах.

3. Отримання та збереження токена від монобанку.
   Щоб отримати токен який дозволить отримувати вашу інформацію від монобанку, необхідно перейти за цією адресою https://api.monobank.ua
   та слідувати інструкціям. Після того як ви отримаєте ключ, додайте його в вашу базу використовуючи POST запит до
   `'http://127.0.0.1:5000/api_v1/api-key'` та передайте ключ в тілі запиту
   `{"project": "mono",
    "api_key": "test key"}`

 Цей ключ буде використовуватися при подальших запитах в моно автоматично, вам не потрібно його кожен раз підставляти.
 
 * Для запитів до моно використаний модуль https://github.com/vitalik/python-monobank з якого я зробив форк та мінімально змінив для роботи проекту.


 4. Отримайте інформацію по власних рахунках в моно. Для цього вам необхідно створити POST запит до `'http://127.0.0.1:5000/api_v1/load-accounts'`
    Дані по вашим рахункам оновляться в БД та повернуться вам при успішній відповіді сервера.

5. Завантаження транзакцій відбувається при POST запиті до `'http://127.0.0.1:5000/api_v1/load-transactions'`.
   * Зверніть увагу, при першому запиті програма намагатиметься завантажити всі ваші транзакції та всіх рахунках в моно, це може зайняти деякий час через обмеження
     серверу моно на кількість запитів від одного ІР.

   Після завантаження операцій ви можете переглянути всі транзакції за допомогою GET запиту до `'http://127.0.0.1:5000/api_v1/load-transactions'`.
   Він поверне інформацію про всі оперції в наступному форматі:
   <img width="324" alt="image" src="https://github.com/xneoSavage/flaskMono_backend/assets/68568486/02c08bd9-3ffd-4ef5-b3c9-cb720caf8973">

   Аналогічно ви може скористатися методом `'http://127.0.0.1:5000/api_v1/get-accounts'` який поверне інформацію про ваші рахунки.

6. Інші методи можуть бути частково недоступні на даний момент.


